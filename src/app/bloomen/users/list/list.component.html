<div class="mat-typography mb-3">
  <h2>Current Users</h2>
</div>

<label>Custom tags</label>

<p>
  Selected user IDs: {{selectedUserIds}}
</p>
<hr />


<ng-select [items]="users$ | async" 
[addTag]="addCustomUser" 
placeholder="Select a User"
[multiple]="true" 
bindLabel="username" 
bindValue="id"
  [(ngModel)]="selectedUserIds">

  <ng-template ng-header-tmp>
    Custom header
  </ng-template>
  <ng-template ng-label-tmp let-item="item"> 

     <b> {{item.username}}</b> is cool  -----  
  </ng-template>
  <ng-template ng-option-tmp let-item="item" let-index="index">
    <img height="15" width="15" [src]="item.avatar" />
    <b>{{item.username}}</b> ( {{item.role}})
  </ng-template>
  <ng-template ng-footer-tmp>
    Custom footer
  </ng-template>
</ng-select>

<hr>




<ng-container *ngIf="users$ | async as users">
  <table mat-table [dataSource]="users" class="user-table mat-elevation-z8">

    <ng-container matColumnDef="role">
      <th mat-header-cell *matHeaderCellDef> Role </th>
      <td mat-cell *matCellDef="let element"> {{element.role}} </td>
    </ng-container>
    <ng-container matColumnDef="username">
      <th mat-header-cell *matHeaderCellDef> Username </th>
      <td mat-cell *matCellDef="let element"> {{element.username}} </td>
    </ng-container>
    <ng-container matColumnDef="hash">
      <th mat-header-cell *matHeaderCellDef> Hash </th>
      <td mat-cell *matCellDef="let element"> {{element.hash}} </td>
    </ng-container>
    <ng-container matColumnDef="organisation">
      <th mat-header-cell *matHeaderCellDef> Organisation </th>
      <td mat-cell *matCellDef="let element"> {{element.organisation}} </td>
    </ng-container>
    <ng-container matColumnDef="createdAtUTC">
      <th mat-header-cell *matHeaderCellDef> Created </th>
      <td mat-cell *matCellDef="let element"> {{element.createdAtUTC}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <!--  <pre>{{ users | json }}</pre>-->
</ng-container>